/**
 * Created by macuser on 4/27/16.
 */

    /*    d3.json('data/Canada.json', function (data) {
console.log(data)
            nv.addGraph(function () {
                var chart = nv.models.stackedAreaChart()
                    .margin({right: 100})
                    .x(function (d) {
                        return d[0]
                    })
                    .y(function (d) {
                        return d[1]
                    })
                    .useInteractiveGuideline(true)
                    .rightAlignYAxis(true)
                    .showControls(true)
                    .clipEdge(true);

                //Format x-axis labels with custom function.
                chart.xAxis
                    .tickFormat(function (d) {
                        return d3.time.format('%Y')(new Date(d))
                    });

                chart.yAxis
                    .tickFormat(d3.format(',.f'));

                // chart.style('stream');

                d3.select('#stacked_trial')
                    .datum(data)
                    .transition().duration(500)
                    .call(chart);

                nv.utils.windowResize(chart.update);

                return chart;
            });
        })
*/

var UN_data = [{'key': 'Africa',
    'values': [[-281318400000, 352.87],
        [-249782400000, 350.25999999999999],
        [-218246400000, 347.88],
        [-186710400000, 351.78999999999996],
        [-155088000000, 367.00999999999993],
        [-123552000000, 371.96000000000004],
        [-92016000000, 374.04000000000002],
        [-60480000000, 380.03000000000003],
        [-28857600000, 379.55000000000007],
        [2678400000, 384.63000000000005],
        [34214400000, 392.29000000000002],
        [65750400000, 384.99000000000001],
        [97372800000, 376.97000000000003],
        [128908800000, 381.74000000000001],
        [160444800000, 391.54000000000002],
        [191980800000, 395.96000000000004],
        [223603200000, 415.09000000000003],
        [255139200000, 427.54999999999995],
        [286675200000, 428.85000000000002],
        [318211200000, 436.91000000000003],
        [349833600000, 453.11999999999995],
        [381369600000, 453.60000000000002],
        [412905600000, 448.20000000000005],
        [444441600000, 422.92000000000002],
        [476064000000, 433.77000000000004],
        [507600000000, 425.25],
        [539136000000, 430.06],
        [570672000000, 430.58000000000004],
        [602294400000, 433.80999999999995],
        [633830400000, 437.45000000000005],
        [665366400000, 419.49999999999994],
        [696902400000, 422.0100000000001],
        [728524800000, 415.51999999999992],
        [760060800000, 406.15000000000003],
        [791596800000, 423.16000000000003],
        [823132800000, 404.06],
        [854755200000, 417.89000000000004],
        [886291200000, 424.5],
        [917827200000, 432.35000000000002],
        [949363200000, 441.19],
        [980985600000, 452.96999999999997],
        [1012521600000, 478.14999999999992],
        [1044057600000, 494.37999999999994],
        [1075593600000, 502.31000000000006],
        [1107216000000, 508.59000000000003],
        [1138752000000, 516.97000000000003],
        [1170288000000, 530.68000000000006],
        [1201824000000, 530.58999999999992],
        [1233446400000, 526.14999999999998],
        [1264982400000, 546.48000000000002],
        [1296518400000, 548.06999999999982],
        [1328054400000, 116.39999999999999]]},
    {'key': 'Europe',
        'values': [[-281318400000, 1734.5799999999999],
            [-249782400000, 1754.2800000000004],
            [-218246400000, 1808.7899999999997],
            [-186710400000, 1780.2699999999998],
            [-155088000000, 1764.02],
            [-123552000000, 1807.2400000000002],
            [-92016000000, 1892.5],
            [-60480000000, 1933.4300000000001],
            [-28857600000, 1952.6700000000001],
            [2678400000, 1994.1799999999996],
            [34214400000, 1991.3],
            [65750400000, 2003.6899999999996],
            [97372800000, 1966.4599999999998],
            [128908800000, 2046.6800000000003],
            [160444800000, 2074.2400000000002],
            [191980800000, 2073.3499999999995],
            [223603200000, 2042.74],
            [255139200000, 2086.3299999999995],
            [286675200000, 2114.1800000000003],
            [318211200000, 2104.8699999999999],
            [349833600000, 2087.1199999999994],
            [381369600000, 2074.2999999999997],
            [412905600000, 2090.0100000000002],
            [444441600000, 2129.0799999999999],
            [476064000000, 2461.7400000000007],
            [507600000000, 2463.8499999999999],
            [539136000000, 2478.6999999999994],
            [570672000000, 2491.4700000000003],
            [602294400000, 2302.0900000000001],
            [633830400000, 2286.3000000000006],
            [665366400000, 2179.7600000000002],
            [696902400000, 2022.5499999999997],
            [728524800000, 1993.0400000000004],
            [760060800000, 2023.1199999999999],
            [791596800000, 2048.3299999999999],
            [823132800000, 2052.3199999999997],
            [854755200000, 2045.4299999999998],
            [886291200000, 2102.0500000000002],
            [917827200000, 2094.1800000000003],
            [949363200000, 2067.54],
            [980985600000, 2087.1900000000001],
            [1012521600000, 2124.1999999999998],
            [1044057600000, 2114.9299999999998],
            [1075593600000, 2121.8399999999997],
            [1107216000000, 2144.8999999999996],
            [1138752000000, 2158.6300000000001],
            [1170288000000, 2187.9000000000001],
            [1201824000000, 2161.7199999999998],
            [1233446400000, 2182.0500000000006],
            [1264982400000, 2175.8799999999997],
            [1296518400000, 2172.79],
            [1328054400000, 0]]},
    {'key': 'Oceania',
        'values': [[-281318400000, 2428.3300000000004],
            [-249782400000, 2474.2000000000003],
            [-218246400000, 2434.3399999999997],
            [-186710400000, 2439.2699999999995],
            [-155088000000, 2443.5299999999997],
            [-123552000000, 2558.1799999999998],
            [-92016000000, 2396.5500000000002],
            [-60480000000, 2470.6599999999999],
            [-28857600000, 2456.1399999999999],
            [2678400000, 2446.6400000000003],
            [34214400000, 2527.27],
            [65750400000, 2546.5699999999997],
            [97372800000, 2555.3999999999996],
            [128908800000, 2407.9200000000001],
            [160444800000, 2569.5099999999998],
            [191980800000, 2603.5],
            [223603200000, 2417.4900000000007],
            [255139200000, 2332.8600000000006],
            [286675200000, 2268.0999999999999],
            [318211200000, 2273.1900000000001],
            [349833600000, 2320.7599999999998],
            [381369600000, 2400.1200000000003],
            [412905600000, 2377.6600000000003],
            [444441600000, 2389.1900000000001],
            [476064000000, 2385.3299999999999],
            [507600000000, 2380.6999999999998],
            [539136000000, 2340.98],
            [570672000000, 2413.1900000000001],
            [602294400000, 2437.4399999999996],
            [633830400000, 2433.3199999999997],
            [665366400000, 2360.8400000000001],
            [696902400000, 2317.3800000000001],
            [728524800000, 2319.1500000000001],
            [760060800000, 2323.3699999999999],
            [791596800000, 2315.8899999999994],
            [823132800000, 2303.27],
            [854755200000, 2233.3900000000003],
            [886291200000, 2089.7199999999998],
            [917827200000, 2078.8900000000003],
            [949363200000, 2081.6199999999999],
            [980985600000, 2064.23],
            [1012521600000, 2101.25],
            [1044057600000, 2077.1099999999997],
            [1075593600000, 1999.8899999999999],
            [1107216000000, 2116.8199999999993],
            [1138752000000, 2232.4000000000001],
            [1170288000000, 2242.4200000000001],
            [1201824000000, 2178.3099999999999],
            [1233446400000, 2077.71],
            [1264982400000, 2147.9100000000003],
            [1296518400000, 2324.8400000000001],
            [1328054400000, 0]]},
    {'key': 'Asia',
        'values': [[-281318400000, 255.84000000000003],
            [-249782400000, 258.75],
            [-218246400000, 265.61000000000007],
            [-186710400000, 268.91000000000003],
            [-155088000000, 269.54000000000002],
            [-123552000000, 273.75999999999999],
            [-92016000000, 276.42000000000002],
            [-60480000000, 282.89000000000004],
            [-28857600000, 284.95000000000005],
            [2678400000, 279.06999999999999],
            [34214400000, 288.40000000000003],
            [65750400000, 292.37999999999994],
            [97372800000, 294.87],
            [128908800000, 301.20999999999998],
            [160444800000, 298.64999999999998],
            [191980800000, 308.81999999999994],
            [223603200000, 317.72000000000003],
            [255139200000, 324.36000000000001],
            [286675200000, 333.14999999999998],
            [318211200000, 337.13999999999999],
            [349833600000, 346.60999999999996],
            [381369600000, 355.85000000000008],
            [412905600000, 367.80999999999995],
            [444441600000, 384.69],
            [476064000000, 411.12999999999994],
            [507600000000, 419.87],
            [539136000000, 428.93000000000001],
            [570672000000, 438.06999999999999],
            [602294400000, 442.41000000000008],
            [633830400000, 448.53999999999996],
            [665366400000, 458.27999999999992],
            [696902400000, 484.23000000000002],
            [728524800000, 499.82000000000011],
            [760060800000, 524.97000000000003],
            [791596800000, 549.59999999999991],
            [823132800000, 568.76999999999998],
            [854755200000, 574.50000000000011],
            [886291200000, 583.99000000000001],
            [917827200000, 605.03999999999985],
            [949363200000, 614.21999999999991],
            [980985600000, 617.48000000000002],
            [1012521600000, 630.70999999999992],
            [1044057600000, 657.53999999999996],
            [1075593600000, 683.58999999999992],
            [1107216000000, 705.04999999999995],
            [1138752000000, 733.61000000000013],
            [1170288000000, 763.82000000000005],
            [1201824000000, 779.66000000000008],
            [1233446400000, 801.26999999999998],
            [1264982400000, 822.95000000000005],
            [1296518400000, 842.15999999999997],
            [1328054400000, 136.19999999999999]]},
    {'key': 'Northern America',
        'values': [[-281318400000, 2729.3800000000006],
            [-249782400000, 2615.8600000000006],
            [-218246400000, 2678.5700000000002],
            [-186710400000, 2701.2100000000005],
            [-155088000000, 2683.8000000000002],
            [-123552000000, 2723.5999999999995],
            [-92016000000, 2675.9700000000003],
            [-60480000000, 2695.3800000000001],
            [-28857600000, 2678.8700000000003],
            [2678400000, 2682.3399999999997],
            [34214400000, 2704.0],
            [65750400000, 2652.0799999999999],
            [97372800000, 2668.8399999999997],
            [128908800000, 2576.8099999999999],
            [160444800000, 2482.0300000000002],
            [191980800000, 2599.4200000000001],
            [223603200000, 2575.52],
            [255139200000, 2553.6699999999996],
            [286675200000, 2605.3099999999999],
            [318211200000, 2540.1900000000005],
            [349833600000, 2552.9099999999994],
            [381369600000, 2598.1900000000001],
            [412905600000, 2643.5699999999997],
            [444441600000, 2607.2399999999998],
            [476064000000, 2672.3500000000004],
            [507600000000, 2674.6399999999999],
            [539136000000, 2723.1800000000003],
            [570672000000, 2671.5100000000002],
            [602294400000, 2652.4899999999998],
            [633830400000, 2654.3600000000001],
            [665366400000, 2650.0599999999999],
            [696902400000, 2689.6400000000003],
            [728524800000, 2656.79],
            [760060800000, 2697.5099999999998],
            [791596800000, 2681.7399999999998],
            [823132800000, 2623.9500000000003],
            [854755200000, 2607.5499999999993],
            [886291200000, 2633.4700000000007],
            [917827200000, 2661.4400000000001],
            [949363200000, 2676.5700000000002],
            [980985600000, 2717.2199999999998],
            [1012521600000, 2710.3400000000001],
            [1044057600000, 2695.2999999999997],
            [1075593600000, 2725.0999999999995],
            [1107216000000, 2672.4900000000002],
            [1138752000000, 2655.25],
            [1170288000000, 2691.8799999999997],
            [1201824000000, 2616.1500000000001],
            [1233446400000, 2594.0600000000004],
            [1264982400000, 2566.3199999999997],
            [1296518400000, 2580.4599999999996],
            [1328054400000, 0]]},
    {'key': 'Central America',
        'values': [[-281318400000, 619.20999999999992],
            [-249782400000, 618.84000000000003],
            [-218246400000, 609.71000000000004],
            [-186710400000, 610.0100000000001],
            [-155088000000, 587.6400000000001],
            [-123552000000, 689.46000000000015],
            [-92016000000, 717.53999999999996],
            [-60480000000, 712.30999999999983],
            [-28857600000, 736.42000000000007],
            [2678400000, 754.36999999999989],
            [34214400000, 769.98000000000002],
            [65750400000, 868.52999999999997],
            [97372800000, 880.88999999999999],
            [128908800000, 950.42999999999984],
            [160444800000, 905.37],
            [191980800000, 941.28999999999996],
            [223603200000, 981.26999999999998],
            [255139200000, 1010.1800000000002],
            [286675200000, 1023.0400000000002],
            [318211200000, 1169.7],
            [349833600000, 1107.9899999999998],
            [381369600000, 1050.8699999999999],
            [412905600000, 1019.0199999999999],
            [444441600000, 1005.3],
            [476064000000, 1083.4199999999998],
            [507600000000, 1012.5000000000001],
            [539136000000, 994.40999999999985],
            [570672000000, 964.22000000000003],
            [602294400000, 945.49000000000001],
            [633830400000, 993.07999999999993],
            [665366400000, 922.8599999999999],
            [696902400000, 1030.0399999999997],
            [728524800000, 1054.4200000000001],
            [760060800000, 1045.7],
            [791596800000, 1001.7400000000001],
            [823132800000, 981.93000000000018],
            [854755200000, 1021.29],
            [886291200000, 1081.9899999999998],
            [917827200000, 1129.9000000000001],
            [949363200000, 1176.3400000000001],
            [980985600000, 1208.0700000000002],
            [1012521600000, 1227.1599999999999],
            [1044057600000, 1226.6600000000001],
            [1075593600000, 1231.4800000000002],
            [1107216000000, 1254.78],
            [1138752000000, 1230.7399999999998],
            [1170288000000, 1274.0900000000001],
            [1201824000000, 1259.1100000000001],
            [1233446400000, 1251.4599999999996],
            [1264982400000, 1235.5900000000001],
            [1296518400000, 1247.6900000000001],
            [1328054400000, 195.31999999999999]]},
    {'key': 'South America',
        'values': [[-281318400000, 904.56999999999994],
            [-249782400000, 913.4699999999998],
            [-218246400000, 924.56000000000017],
            [-186710400000, 939.54999999999995],
            [-155088000000, 957.46999999999969],
            [-123552000000, 970.40999999999997],
            [-92016000000, 936.0100000000001],
            [-60480000000, 969.80000000000018],
            [-28857600000, 956.53999999999985],
            [2678400000, 954.87999999999965],
            [34214400000, 933.62],
            [65750400000, 926.63000000000011],
            [97372800000, 938.30000000000018],
            [128908800000, 982.84999999999991],
            [160444800000, 1021.65],
            [191980800000, 1036.8999999999996],
            [223603200000, 1029.28],
            [255139200000, 1005.3299999999999],
            [286675200000, 1031.03],
            [318211200000, 1086.0599999999999],
            [349833600000, 1049.9899999999998],
            [381369600000, 1038.1800000000001],
            [412905600000, 1012.3599999999997],
            [444441600000, 1033.2199999999998],
            [476064000000, 1036.1799999999998],
            [507600000000, 1094.3200000000002],
            [539136000000, 1114.4199999999998],
            [570672000000, 1090.6699999999998],
            [602294400000, 1125.8899999999999],
            [633830400000, 1103.76],
            [665366400000, 1153.1000000000001],
            [696902400000, 1173.8600000000001],
            [728524800000, 1189.9799999999998],
            [760060800000, 1235.26],
            [791596800000, 1348.29],
            [823132800000, 1385.4100000000001],
            [854755200000, 1371.23],
            [886291200000, 1378.8899999999999],
            [917827200000, 1387.3000000000002],
            [949363200000, 1397.2800000000002],
            [980985600000, 1371.3199999999999],
            [1012521600000, 1363.2799999999997],
            [1044057600000, 1354.7300000000002],
            [1075593600000, 1348.6699999999998],
            [1107216000000, 1380.5699999999997],
            [1138752000000, 1430.8700000000001],
            [1170288000000, 1456.9000000000003],
            [1201824000000, 1538.74],
            [1233446400000, 1529.3999999999999],
            [1264982400000, 1597.6500000000001],
            [1296518400000, 1648.01],
            [1328054400000, 344.92000000000002]]}]




var colors = d3.scale.category20();
var chart;
nv.addGraph(function() {
    chart = nv.models.stackedAreaChart()
        .useInteractiveGuideline(true)
        .x(function(d) { return d[0] })
        .y(function(d) { return d[1] })
        .controlLabels({stacked: "Stacked"})
        .duration(300);

    chart.xAxis.tickFormat(function(d) { return d3.time.format('%Y')(new Date(d)) });

    chart.yAxis.tickFormat(d3.format(',.0f'));

    chart.legend.vers('furious');

    chart.yAxis.axisLabel("Food in gram per capita")

    chart.margin({bottom: 60});
    chart.margin({left: 60});

    d3.select('#stacked_trial')
        .datum(UN_data)
        .transition().duration(1000)
        .call(chart)
        .each('start', function() {
            setTimeout(function() {
                d3.selectAll('#stacked_trial').each(function() {
                    if(this.__transition__)
                        this.__transition__.duration = 1;
                })
            }, 0)
        });
    nv.utils.windowResize(chart.update);

    return chart;
    

});